Особенности клиент-клиентского взаимодействия через сервер (чат)

Клиент не может напрямую взаимодействовать с другим клиентом.
Даже если удастся установить соединение, у клиентов одинаковые
протоколы, то есть они сразу начинают писать в сокет, что приведет
к потере данных

Клиент ----- Сервер ------ Клиент

сообщ ------> [  ] <------ сообщ
нов?  --DT-->|
      <-{}---|

Прикладной протокол - разные запросы могут требовать разного обслуживания
необходимо установить каким способом будут отличаться эти запросы и как 
они будут передавать данные
{                                          {
    action : message | get                     status : OK | error
    data : messageText | timestamp             data : confirm | array(message)
    author : String
}                                          }

